# Computer Systems A Programmer's Perspetive

[TOC]

## Chapter 1: 漫游计算机系统

### 信息 = 位 + 上下文

```c
// hello.c
#include <stdio.h>

int main () {
    printf("hello world\n");
    return 0;
}
```

`hello.c` 是一个文本文件 是由一连串bit组成的

同一串bit在不同的上下文中，表示的意思是不一样的



### 源文件到可执行文件

从源文件`hello.c` 到可执行文件`hello`的过程

1. 预处理：hello.c -> hello.i，将`#include<stdio.h>`这部分头文件的代码插入到源代码中

2. 编译：hello.i -> hello.s 生成汇编代码

3. 汇编：hello.s -> hello.o 将汇编语言翻译为机器语言指令，生成可重载对象程序

4. 链接：将print.o与hello.o链接起来 形成hello可执行文件

   > 可执行文件可以被加载入内存并被系统执行



### 了解编译系统如何工作的好处

- 提高程序性能
- 理解链接时错误
- 避免安全漏洞



### 处理器读取或翻译存储在内存中的指令

系统的硬件组成：

- 总线：64bit的系统 -> 总线的传输的字的长度是64bit 

- IO设备

- 主内存：临时存储处理器执行程序所需的程序和数据的地方 由DRAM组成，逻辑上是一个线性的字节数组

- 处理器：寄存器 + PC，重复地执行PC指向的指令并更新PC的值

  `helloworld`程序执行过程：

  - 可执行文件通过DMA，直接从磁盘加载到内存
  - CPU从内存中取出数据 并写到外设中



### 缓存

**矛盾**：处理器的处理速度远远快于从内存中取数据的速度

解决方法：利用局部性原理，在CPU和内存之间加上多级缓存，每一层存储设备都是下一层存储设备的缓存



