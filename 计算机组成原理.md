# 计算机组成原理

[TOC]

![](https://static001.geekbang.org/resource/image/12/ff/12bc980053ea355a201e2b529048e2ff.jpg)





## 计算机基本组成



### 基本硬件组成

+ CPU：负责计算

+ 内存：程序需要加载到内存中才能运行

+ 主板：CPU和内存都插在主板上

  > 主板的芯片组和总线解决了CPU和内存之间的通信问题
  >
  > 南桥芯片组：控制外部IO设备和CPU之间的通信

+ 输出设备：显示器

+ 输入设备：鼠标、键盘



### 冯诺依曼结构体系

> 又称为存储程序计算机

计算机应该由以下部分组成：

+ 处理器单元：算术逻辑单元 + 处理器寄存器
+ 控制器单元：程序计数器 + 指令寄存器
+ 存储单元：内存 + 外存（用于存储数据和指令）
+ 输入设备
+ 输出设备

![](https://static001.geekbang.org/resource/image/fa/2b/fa8e0e3c96a70cc07b4f0490bfe66f2b.jpeg)



### 计算机性能

性能=1/响应时间

**性能指标**

+ 响应时间：执行一个程序需要花费的时间

+ 吞吐率：一定的时间范围内计算机能处理的数据或者执行的程序指令

  可以通过增加计算机核数提高吞吐率（多核就是多个CPU放在了同一块芯片上）



程序的执行时间 = 程序CPU执行时间 + 其他时间（其他程序执行时间、IO、进程切换时间）



程序CPU执行时间 = 指令数 * 指令的平均时钟周期数 * 时钟周期时间

> 指令数：程序编译得来
>
> 时钟周期时间：计算机主频的倒数 如主频为3.2GHz 时钟周期时间为1/3.2G 超频就是提高主频 减少时钟周期时间 也会导致散热压力加大



缩短程序CPU执行时间的方法：

+ 减少程序编译后的指令数
+ 减少指令的平均时钟周期数
+ 减少时钟周期是阿金



### 计算器功耗

CPU计算得更快的方法：

+ 相同面积内多放一些晶体管：制作更小的晶体管，增加密度
+ 让晶体管打开关闭的速度更快，提升主频

这样都会造成耗电和散热的问题



功耗 = 1/2 * 负载电容 * 电压的平方 * 开关频率 * 晶体管数量



**阿姆达尔定律**：部分的优化给整体带来的速度的提升时不明显的，详见CSAPP1.9



计算机层面提高性能的几个原则性方法：

+ 并行计算
+ 加速大概率事件：缓存
+ 通过流水线提高性能
+ 通过预测提高性能





## 计算机指令和运算

### 

### 计算机指令

**存储程序型计算机**：程序指令存储在存储器中的计算机



不同架构的CPU有自身的计算机指令集 `x86` `ARM`



```mermaid
graph LR
a[高级语言] --编译--> b[汇编语言]
b--汇编--> c[机器语言]
```

![](https://static001.geekbang.org/resource/image/67/5b/67cf3c90ac9bde229352e1be0db24b5b.png)



**常见的计算机指令类型**

![](https://static001.geekbang.org/resource/image/eb/97/ebfd3bfe5dba764cdcf871e23b29f197.jpeg)



